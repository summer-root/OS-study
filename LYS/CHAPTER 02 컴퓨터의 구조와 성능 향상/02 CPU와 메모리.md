##1 CPU의 구성과 동작 

### 1.1 CPU의 기본 구성
CPU는 산술논리 연산장치, 제어장치, 레지스터로 구성되고 이것들의 협업으로 작업을 처리한다.

- 산술논리 연산장치
    CPU에서 데이터를 연산하는 장치가 산술논리 연산장치이다. 
    사칙연산과 같은 산술연과 AND, OR 같은 논리 연산을 수행한다. 
- 제어장치
    CPU에서 작업을 지시하는 부분을 말한다. 
- 레지스터 
    CPU내에 데이터를 임시로 보관하는 곳이다. 

### 1.2 CPU의 명령어 처리 과정

CPU는 0과 1의 2진수로 이루어진 기계어만 인식하는데 
<br>
```
int D2=2, D3=3, sum;
sum = D2+D3;
```
위 코드를 실행하려면 컴파일러를 이용하여 기계어로 바꾸어야한다. 

<br>
**어셈블리어는 기계어를 사람이 이해하기 쉬운 기호와 일대일로 대응시켜 기호한 언어이다.

**어셈블리어로 변환한 덧셈 프로그램
```
LOAD mem(100), register 2; // 01행 : 메모리의 100번지 (D2)에 있는 값을 레지스터 2로 가져온다.
<br>
LOAD mem(120), register 3;  // 02행 : 메모리의 120번지 (D3)에 있는 값을 레지스터 3로 가져온다.
<br>
ADD register 5, register 2, register 3;  // 03행 : 레지스터와 2와 레지스터 3에 저장된 값을 저장된 겂을 더한 결과를 레지스터 5에 넣는다.
<br>
MOVE register 5, mem(160); // 04행 : 레지스터 5의 값을  메모리의 160번지(sum)로 옮긴다. 
```
<br>
**D2는 메모리의 100번지, D3은 120번지, sum은 160번지를 가르킨다고 가정하고 
<br>
**LOAD 는 가져오기, ADD 는 더하기, MOVE 는 옮기기 명령어이며, register 1은 레지스터 1을, mem(100)은 메모리 100번지를 의미
<br><br>CPU가 연산을 하려면 필요한 데이터를 CPU 로 가져와 임시로 보관해야하는데, 이때 사용되는 장소가 레지스터이다.
<br>
<br>
모든 데이터가 준비되면 산술논리 연산장치에서 두 값을 더하고 그 결과를 레지스터에 저장하고 최종적으로 메모리 160번지에 옮긴다. 
<br> 제어장치는 명령어를 해석하여 제어 신호를 보내고 CPU 내의 데이터 흐름을 조절하는 역할을 의미한다. 
<br> 위의 예에서 제어장치는 '메모리에서 데이터를 가져와라', '덧셈을 실행하라' 등과 같은 신호를 보낸다. 


###1.3 레지스터의 종류
CPU는 필요한 데이터를 메모리에서 가져와 레지스터에 저장하고 산술논리 연산장치를 이용하여 연산을 한 후, 그 결과를 다시 레지스터에 저장했다가 메모리로 옮긴다. 
 
 
- 데이터 레지스터(DR) : 데이터  레지스터는 메모리에서 가져온 데이터를 임시로 보관할 때까지 사용한다. CPU의 대부분의 레지스터이기 때문에 일반 레지스터 또는 범용 레지스터라고 부른다.


- 주소 레지스터(AR) : 데이터 또는 명령어가 저장된 메모리의 주소를 저장한다. 


- 프로그램 카운터 (PC) : CPU는 다음에 어떤 명령어를 처리해야 할지 알아야한다. (어셈블리 덧셈 프로그램에서 01행 다음에 02행이 실행되어야하는 것 처럼) 다음에 실행할 명령어의 주소를 기억하고 있다가 제어장치에 알려준다. 
                    다음에 실행할 명령어의 주소를 가리키기 때문에 명령어 포인터라고도 한다. 


- 명령어 레지스터(IR) : 명령어 레지스터는 현재 실행중인 명령어를 저장한다. 제어장치는 명령어 레지스터에 있는 명령을 해석한 후 외부 장치에 적절한 제어 신호를 보낸다. 



- 메모리 주소 레지스터(MAR) : 메모리에서 데이터를 가져오거나 반대로 메모리로 데이터를 보낼 때 주소를 지정하기 위해 사용한다. 명령어를 처리하는 과정에서 필요한 메모리 주소를 이 레지스터에 넣으면 
                            메모리 관리자가 이를 인식하여 해당 메모리 위치의 데이터를 가져오거나 해당 메모리 위치에 데이터를 저장한다. 



- 메모리 버퍼 레지스터 (MBR) : 메모리에서 가져온 데이터나 메모리로 옮겨 갈 데이터를 임시로 저장한다. 메모리 버퍼 레지스터는 항상 메모리 주소와 함께 동작한다.

###1.4 버스의 종류 

- 제어 버스 : 제어 버스와 연결된 버스로 , CPU가 메모리와 주변장치에 제어 신호를 보내기 위해 사용한다. 메모리와 주변장치에서도 작업이 완료되거나 오류가 발생하면 제어 신호를 보내기 위해 사용한다.
            메모리와 주변장치에서 작업이 완료되거나 오류가 발생하면 제어 신호를 보내기 떄문에 양방향이다. 

- 주소 버스 : 메모리 주소 레지스터와 연결된 버스로, 메모리나 주변장치에 데이터를 읽거나 쓸 때 위치 정보를 보내기 위해 사용하며 단방향이다. 
- 데이터 버스 : 메모리 버퍼 레지스터와 연결된 버스로 데이터의 이동이 양방향으로 이루어진다. 

** 버스의 대역폭 : 한 번에 전달 할 수 있는 데이터의 최대 크기, 단위는 워드 , 1워드는 32bit이다. 

### 2 메모리의 종류와 부팅
- 휘발성 메모리

    - DRAM(동적 램) : 저장된 0과 1의 데이터가 일정 시간이 지나면 사라지므로 일정 시간마다 다시 재생시켜야한다. 일반적으로 메인 메모리는 DRAM을 사용 
<br>

    - SRAM(정적 램) : 전력이 공급되는 동안에는 데이터를 보관할 수 있어 재생할 필요가 없다. 캐시같은 고속 메모리에 사용
<br>
    - SDRAM : DRAM이 발전된 형태, 클록틱(펄스)이 발생 할 때마다 데이터를 저장하는 동기 DRAM이다. 


- 비휘발성 메모리 : 플래쉬메모리. FRAM, 하드디스크를 대신하도록 만든 SSD등이 있다. 전력이 없어도 데이터를 보관하는 저장장치로 많이 사용된다.

** 램과 달리 롬은 전력이 끊겨도 데이터를 보관하는 것이 장점이지만 데이터를 한 번 저장하면 수정이 불가능하다. 

### 2-2 메모리 보호
CPU는 현재 진행 중인 작업의 메모리 시작 주소를 경계 레지스터에 저장한 후 작업을 한다. 
현재 진행 중인 작업이 차지하고 있는 메모리으 크기, 즉 마지막 주소까지의 차이를 한계 레지스터에 저장한다. 
그리고 사용자의 작업이 진행되는 동안 이 두 레지스터의 주소 범위를 벗어나는지 하드웨어적으로 점검하므로써 메모리를 보호한다. 

### 2.3 부팅

- 부팅 : 컴퓨터를 켰을 때 운영체제를 메모리에 올리는 과정

    - 부팅과정
  
  1. 사용자가 전원으 켜면 롬에 저장된 바이오스가 실행된다. 
  2. 바이오스는 CPU, 메모리, 하드디스크, 키보드와 같은 중요 하드웨어가 제대로 작동하는지 확인한다.
  3. 이상있으면 삐- 소리와 함께 오류 출력, 정상이면 하드디스크의 마스터 레코드에 저장된 작은 프로그램을 메모리로 가져와 실행한다. 
  4. 마스터 부트 레코드는 첫 번째 섹터인 운영체제를 실행하기 위한 코드인 부트스트랩(운영체제를 메모리로 가져와 실행하는 역할의 작은 프로그램)이 실행되며 메모리에 올라온다.
  5. 하드디스크에 저장된 운영체제를 메모리로 불러온다.
   







































