# 03 단일 프로그래밍 환경에서의 메모리 할당
## 1 메모리 오버레이 (memory overlay)
- 프로그램의 크기가 실제 메모리(물리 메모리)보다 클 때 전체 프로그램을 메모리에 가져오는 대신 적당한 크기로 잘라서 가져오는 기법
- 'overlay'는 '겹겹이 쌓다', '중첩시키다'라는 뜻으로, 메모리 오버레이는 하나의 메모리에 여러 프로그램을 겹겹이 쌓아놓고 실행하는 것을 의미
- 프로그램을 몇 개의 모듈로 나누고 필요할 때마다 모듈을 메모리에 가져와 사용함
    - 전체 프로그램을 메모리에 올려놓고 실행하기에는 메모리의 크기가 작기 떄문에 실행하는 데 필요한 중요한 모듈만 올려놓고 나머지는 필요할 때마다 메모리에 가져와 사용하는 것
    - 프로그램 전체를 메모리에 올려놓고 실행하는 것보다 속도가 느리지만 메모리가 프로그램보다 작을 때도 실행할 수 있어 유용함
- 어떤 모듈을 가져오거나 내보낼지는 CPU 레지스터 중 하나인 프로그램 카운터(PC)가 결정함
    - 프로그램 카운터: 앞으로 실행할 명령어의 위치를 가리키는 레지스터로, 해당 모듈이 메모리에 없으면 메모리 관리자에게 요청하여 메모리로 가져오게 함
- 메모리 오버레이의 의미
    1. 한정된 메모리에서 메모리보다 큰 프로그램의 실행이 가능함 (= 가상 메모리 시스템의 기본이 되는 개념)
    2. 프로그램 전체가 아니라 일부만 메모리에 올라와도 실행이 가능함  
       이는 메모리를 여러 조각으로 나누어 여러 프로세스에 할당할 수 있다는 의미이기도 함

## 2 스왑
- 스왑 영역 (swap area)
    - 메모리가 모자라서 쫓겨난 프로세스를 모아두는 저장장치의 특별한 공간
    - 메모리가 관리자가 관리함
        - 원래 하드디스크 같은 저장장치는 저장장치 관리자가 관리하지만, 스왑 영역은 메모리에서 쫓겨났다가 다시 돌아가는 데이터가 머무는 곳이기 때문에 저장장치는 장소만 빌려주고 메모리 관리자가 관리함
    - 사용자는 실제 메모리의 크기와 스왑 영역의 크기를 합쳐서 전체 메모리로 인식하고 사용할 수 있음
- 스왑인 (swap in): 스왑 영역에서 메모리로 데이터를 가져오는 작업
- 스왑아웃(swap out): 메모리에서 스왑 영역으로 데이터를 내보내는 작업