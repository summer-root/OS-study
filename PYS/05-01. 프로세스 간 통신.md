# 01 프로세스 간 통신
## 1 프로세스 간 통신의 개념
- 프로세스가 다른 프로세스와 데이터를 주고받는 것
- __프로세스 간 통신은 읽기와 쓰기 연산으로 구현할 수 있음__
- 종류
    - 프로세스 내부 데이터 통신
        - 하나의 프로세스 내의 2개 이상의 스레드가 전역 변수나 파일을 이용하여 데이터를 주고받음
    - 프로세스 간 데이터 통신
        - 같은 컴퓨터 내의 여러 프로세스가 공용 파일 또는 운영체제가 제공하는 파이프를 사용하여 통신
    - 네트워크를 이용한 데이터 통신
        - 네트워킹: 여러 컴퓨터가 네트워크로 연결되어 있을 때 소켓을 이용하여 데이터를 주고받는 프로세스 간 통신
        - 원격 프로시저 호출

## 2 프로세스 간 통신의 분류
### 2.1 통신 방향에 따른 분류
- 프로세스 간 통신은 동시에 실행되는 프로세스끼리 데이터를 주고받는 작업을 의미
- 양방향 통신
    - 데이터를 동시에 양쪽 방향으로 전송할 수 있는 구조
    - 소켓 통신
- 반양방향 통신
    - 데이터를 양쪽 방향으로 전송할 수 있지만 동시 전송은 불가
- 단방향 통신
    - 한쪽 방향으로만 데이터를 전송할 수 있는 구조
    - 전역 변수, 파이프

### 2.2 통신 구현 방식에 따른 분류
- 바쁜 대기
    - 데이터를 받는 쪽에서 상태 변화를 살펴보기 위해 반복문을 무한 실행하며 기다리는 것
    - 시스템 차원에서 큰 자원 낭비
- 동기화
    - 데이터가 도착했음을 알려줌
    - 바쁜 대기 문제를 해결하기 위해 사용
- 동기화 기능 유무에 따른 분류
    - 대기가 있는 통신 (동기화 통신)
        - 데이터를 받는 쪽은 데이터가 도착할 때까지 자동으로 대기 상태에 머물러 있음
    - 대기가 없는 통신 (비동기화 통신)
        - 데이터를 받는 쪽은 바쁜 대기를 사용하여 데이터가 도착했는지 여부를 직접 확인
        - 통신 오버헤드는 적지만 바쁜 대기처럼 사용자가 직접 처리해야 하는 작업이 많음
        - 전역 변수(공유 메모리), 파일을 이용한 통신

## 3 프로세스 간 통신의 종류
- 프로세스 간 통신에서 가장 중요한 것은 __프로세스 동기화__

### 3.1 전역 변수를 이용한 통신
- 공동으로 관리하는 메모리를 사용하여 데이터를 주고받는 것
- 데이터를 보내는 쪽에서는 전역 변수나 파일에 값을 쓰고, 데이터를 받는 쪽에서는 전역 변수의 값을 읽음
- 주로 직접적으로 관련이 있는 프로세스 간에 사용
- 전역 변수의 값이 변할 때까지 바쁜 대기를 돌면서 계속 주시해야 하는 문제 발생

### 3.2 파일을 이용한 통신
- 파일 입출력 코드의 구성
    - 파일 열기
        - open(): 사용하고자 하는 파일이 있는지, 있다면 쓰기 권한이 있는지 확인하고 파일 기술자를 반환
        - 파일 기술자 (file discriptor, fd): 어떤 파일에 접근할 수 있는 권한, 파일을 연 다음에는 fd를 통해서만 접근이 가능
    - 읽기 또는 쓰기 연산
    - 파일 닫기
- 파일을 이용한 통신은 운영체제가 프로세스 동기화를 제공하지 않음 (주로 부모 프로세스가 wait() 함수를 이용하여 자식 프로세스의 작업이 끝날 때까지 기다렸다가 작업을 시작)

### 3.3 파이프를 이용한 통신
- 파이프는 운영체제가 제공하는 동기화 통신 방식
- open() 함수로 기술자를 얻고 작업을 한 후 close() 함수로 마무리
- 방향 통신 (양방향 통신을 하려면 파이프 2개를 사용해야 함)
- 프로세스가 파이프에 대해 읽기 연산을 수행했는데 아직 데이터가 써지지 않았다면 프로세스는 대기 상태가 됨  
  대기 상태는 파이프에 데이터가 써지면 자동으로 풀려 동기화가 이루어짐
- 파이프 분류
    - 이름 없는 파이프
        - 일반적인 파이프
        - 서로 관련 있는 프로세스 간 통신에 사용    
    - 이름 있는 파이프
        - FIFO라 불리는 특수 파일을 이용하며 서로 관련 없는 프로세스 간 통신에 사용

### 3.4 소켓을 이용한 통신
- 네트워킹: 여러 컴퓨터에 있는 프로세스 간 통신
- 네트워킹 상황에서의 통신은 원격 프로시저 호출이나 소켓을 이용
- 원격 프로시저 호출
    - 다른 컴퓨터에 있는 함수를 호출하는 것
    - 일반적으로 원격 프로시저 호출은 소켓을 이용하여 구현
- 바인딩: 소켓을 매개로 한 쪽의 프로세스와 반대쪽을 프로세스를 연결하는 작업
- 소켓은 프로세스 동기화를 지원하고, 하나만 사용해도 양방향 통신이 가능