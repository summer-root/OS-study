# 단일 프로그래밍 환경에서의 메모리 할당

## 메모리 오버레이

메모리 오버레이 : 프로그램의 크기가 실제 메모리(물리 메모리)보다 클 때 적당한 크기로 잘라서 가져오는 기법

메모리 오버레이의 경우 프로그램을 몇 개의 모듈로 나누고 필요할 때마다 모듈을 메모리에 가져와 사용한다. 프로그램 전체를 메모리에 올려 놓고 실행하는 것보다 느리다.

메모리 오버레이에서 어떤 모듈을 가져오거나 내보낼지는 CPU 레지스터 중 하나인 프로그램 카운터가 결정한다. 프로그램 카운터는 앞으로 실행할 명령어의 위치를 가리키는 레지스터로 해당 모듈이 없으면 메모리 관리자에게 요청하여 메모리로 가져오게 한다.

메모리 오버레이는 다음과 같은 중요한 의미가 있다.

- 한정된 메모리에서 메모리보다 큰 프로그램이 실행 가능하다. 이는 가상 메모리 시스템의 기본이 되는 개념이다.
- 프로그램 전체가 아니라 일부만 메모리에 올라와도 실행이 가능하다. 이는 메모리를 여러 조각으로 나누어 여러 프로세스에 할당할 수 있다는 의미이다.

<br>



## 스왑

스왑 영역 : 메모리가 모자라서 쫓겨난 프로세스를 모아두는 특별한 공간

스왑 인 : 스왑 영역에서 메모리로 데이터를 가져오는 작업

스왑 아웃 : 스왑 영역으로 데이터를 내보내는 작업

<br>



스왑 영역은 저장장치에 존재하지만 메모리에서 쫓겨났다가 다시 돌아가는 데이터가 머무는 곳이기 때문에 메모리 관리자가 관리한다. 

스왑을 이용하면 스왑 영역의 크기가 메모리의 크기로 인식된다. 따라서 사용자는 실제 메모리의 크기와 스왑 영역의 크기를 합쳐 전체 메모리로 인식하고 사용할 수 있다.

<br>



### :pencil2: 윈도우와 유닉스의 스왑 영역 관리

윈도우 운영체제는 스왑 영역을 분리된 파티션으로 따로 관리하지 않고 운영체제와 같은 파티션에 넣고 파일 형태로 관리한다. 윈도우가 설치된 드라이브의 pagefile.sys가 스왑 파일이다. 

스왑 영역의 크기는 운영체제가 하드디스크의 남은 공간과 메모리 사용량을 고려하여 유동적으로 관리하지만 사용자가 직접 조정할 수도 있다. 윈도우 운영체제가 설치된 드라이브 공간에 여분이 없을 때 큰 프로그램을 실행하면 스왑 영역을 더 늘릴 수 없어 시스템이 다운된다.

유닉스 운영체제는 운영체제를 설치할 때 하드디스크의 분리된 파티션에 스왑 영역을 배정한다. 스왑 영역을 확인하려면 free 명령을 사용해야 한다. 보통 유닉스 계열의 운영체제에서는 스왑 영역의 크기를 메모리의 2배 정도로 잡는다.         