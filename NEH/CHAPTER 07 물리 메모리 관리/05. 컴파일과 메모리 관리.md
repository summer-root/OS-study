# 컴파일과 메모리 관리

## 컴파일 과정

컴파일러는 고급 언어로 작성된 소스코드를 기계어로 번역하면서 오류가 있는지 점검하고 최적화를 통해 필요 없는 변수와 코드를 삭제한다. 이렇게 만들어진 기계어 코드가 목적 코드이다. 목적 코드는 기계어 코드로 가기 전 초벌 번역 상태이다.

작성한 코드가 여러 개인 경우 각자 코드를 따로 컴파일하여 목적 코드로 만든 후 목적 코드만 모아 컴파일할 수 있는데 이를 분할 컴파일이라고 부른다. 목적 코드가 만들어졌다는 것은 소스코드의 오류 검증과 코드 최적화가 이루어졌다는 뜻이다. 목적 코드만 따로 모아 분할 컴파일을 하면 공동으로 사용하는 코드나 변수만 정리하면 되기 때문에 분할 작업이 쉬워진다.

목적 코드를 만든 다음은 연결 단계를 진행한다. 이 단계에서는 목적 코드에 라이브러리 코드를 삽입하여 최종 실행 파일을 만든다. 

<br>



## 변수와 메모리 할당

컴파일 과정에서 가장 중요한 것은 메모리를 확보하고 정리하는 부분이다. 기계어는 메모리 주소를 사용한다. 컴파일러는 프로그래머가 지정한 자료형의 크기에 따라 메모리를 확보하고 그곳에 적당한 값을 넣는다. 모든 변수에 대해 메모리를 확보하고 오류를 찾기 위해 심벌 테이블을 유지한다.

** 심벌 테이블

| 심벌 | 종류  | 범위   | 주소 |
| ---- | ----- | ------ | ---- |
| str  | char  | main() | 0    |
| vol  | int   | main() | 1    |
| pri  | float | main() | 5    |

<br>



심벌 테이블처럼 각 변수는 이름, 종류, 범위, 주소를 가진다. 범위는 변수를 사용할 수 있는 영역을 나타낸다. 컴파일러는 변수를 사용할 때마다 사용 범위를 넘는지 점검한다. 변수의 종류마다 크기가 정해져 있기 때문에 변수의 시작 주소만 명시하면 크기는 자동으로 정해진다.

변수는 메모리 주소의 또 다른 이름이다. 기계어의 경우 메모리 주소만 필요로 하기 때문에 변수를 알 필요가 없다. 하지만 프로그래머는 주소값만으로 기억하기 어렵기 때문에 메모리 주소를 변수로 나타내는 것이다. 

컴파일러에 의해 만들어진 주소는 상대 주소이다. 