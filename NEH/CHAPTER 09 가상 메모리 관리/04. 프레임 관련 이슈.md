# 프레임 관련 이슈

## 전역 교체와 지역 교체

- 전역 교체 : 전체 프레임을 대상으로 교체 알고리즘을 적용한다.

- 지역 교체 : 현재 실행 중인 프로세스의 프레임을 대상으로 교체 알고리즘을 적용한다. 

  - 장점 : 자신에게 할당된 프레임의 전체 개수에 변화가 없기 대문에 페이지 교체가 다른 프로세스에 영향을 미치지 않는다. 

    페이지 교체를 위해 다른 프로세스에 할당된 프레임을 뺏으면 프레임을 빼앗긴 프로세스는 스레싱 발생 지점에 도달할 수도 있다. 지역 교체 방식에서는 전체 프로세스에 할당된 프레임의 수가 변하지 않기 때문에 스레싱을 줄일 수 있다.

  - 단점 : 자주 사용하는 페이지가 스왑 영역으로 옮겨져 시스템의 효율이 떨어진다.

<br>



지역 교체 방식은 다른 프로세스의 스레싱을 줄일 수 있지만 반대로 실행 중인 프로세스의 성능을 떨어뜨릴 수도 있다. 그러므로 전체 시스템의 입장에서는 전역 교체 방식이 지역 교체 방식보다 효율적이다.





## 페이지 테이블 크기

32bit CPU를 지원하는 윈도우 NT의 경우 가상 주소 공간의 크기가 2³²B로 약 4GB이다. 이 가상 주소를 4096B로 나누면 2²⁰B(1,048,576B)이다. 따라서 가상 주소 공산에는 1,048,576개의 행이 있다. 이러한 가상 주소를 페이지 테이블로 나타내려면 1,048,576개의 행과 각 행을 표현할 주소 공간 20bit가 필요하다. 따라서 페이지 테이블이 차지하는 공간은 약 2.62MB이다.

페이지 크기가 작을 경우 페이지 테이블 크기는 늘어난다. 

페이지 테이블의 크기를 줄이기 위해 한 페이지의 크기를 크게 하면 좋지만, 무작정 페이지의 크기를 늘릴 수는 없다. 페이지의 크기가 커지면 내부 단편화로 인해 낭비되는 공간이 많아진다.

현대의 컴퓨터 시스템은 물리 메모리도 커지고 응용 프로그램도 커짐에 따라 페이지의 크기도 점점 커지는 추세이다. 페이지의 크기가 4MB인 운영체제도 등장하고 있다.

<br>



## 쓰기 시점 복사

여러 사용자가 같은 크롬 브라우저를 동시에 사용할 때 메모리에 크롬 브라우저를 하나만 올리고 공유하면 메모리 낭비를 줄일 수 있다. 하지만 크롬 브라우저로 서로 다른 페이지를 보는 경우 데이터 영역을 공유할 수는 없다. 

이처럼 공유할 수 없는 데이터를 저장하기 위해 메모리를 확보하려랴 한다. 프로세스가 복사되는 시점에 미리 확보하는 경우 해당 변수의 내용을 바꾸지 않을 수 있다. 이는 사용할지 안 할지 모르는 데이터를 위해 새로운 공간을 만드는 것이다. 따라서 운영체제는 필요로 하는 순간까지 새로운 프레임의 확보를 미룬다. 이와 같이 데이터의 변화가 있을 때까지 복사를 미루는 방식을 쓰기 시점 복사라고 한다.

