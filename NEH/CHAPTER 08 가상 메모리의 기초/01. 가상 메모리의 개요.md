# 가상 메모리의 개요

## 가상 메모리 시스템

### 가상 메모리의 개념

메모리의 크기는 컴퓨터마다 다르기 때문에 운영체제가 물리 메모리의 크기에만 의존하는 경우 2GB의 메모리에서는 동작하는 프로그램이 1GB의 메모리에서는 동작하지 않을 수 있다. 

현대 메모리 관리의 가장 큰 특징은 물리 메모리의 크기와 프로세스가 올라갈 메모리의 위치를 신경 쓰지 않고 프로그래밍하는 것을 지원한다는 것이다. 이런 메모리 시스템을 가상 메모리라고 부른다. 가상 메모리는 물리 메모리의 크기와 상관없이 프로세스에 커다란 메모리 공간을 제공하는 기술이다.

<br>



### 가상 메모리의 크기와 주소

가상 메모리 시스템의 모든 프로세스는 물리 메모리와 별개로 자신이 메모리의 어느 위치에 있는지 상관없이 0번지부터 시작하는 연속된 메모리 공간을 가진다. 논리 주소와 유사하지만 차이점은 논리 주소의 경우 물리 메모리의 주소 공간에 비례하고, 가상 주소는 물리 메모리 공간이 아닌 가상의 주소를 가진다는 것이다.

가상 메모리의 최대 크기는 컴퓨터 시스템이 가진 물리 메모리의 최대 크기로 한정되며, CPU의 비트에 따라 결정된다. 

가상 메모리가 실제로 사용할 수 있는 최대 크기의 제약에도 불구하고 이론적으로 무한대의 크기가 있는 것처럼 구현할 수 있는 이유는 다음과 같다. 가상 메모리 시스템에서는 물리 메모리의 내용 중 일부를 하드디스크의 일부 공간(스왑 영역)으로 옮긴다. 메모리 관리자는 물리 메모리의 부족한 부분을 스왑 영역으로 보충한다.

스왑 영역 : 하드디스크에 존재하지만 메모리 관리자가 관리하는 영역으로서 메모리의 일부이며 가상 메모리의 구성 요소 중 하나

- 스왑인 : 프로세스가 작업을 마치면 스왑 영역에 있는 프로세스를 메모리로 가져오는 것
- 스왑아웃 : 물리 메모리가 꽉 찼을 때 일부 프로세스를 스왑 영역으로 보내는 것

따라서 가상 메모리에서 메모리 관리자가 사용할 수 있는 메모리의 전체 크기는 물리 메모리와 스왑 영역을 합한 크기이다.

<br>



동적 주소 변환 : 가상 메모리 시스템에서 메모리 관리자가 물리 메모리와 스왑 영역을 합쳐서 프로세스가 사용하는 가상 주소를 실제 메모리의 물리 주소로 변환하는 작업이다. 동적 주소 변환을 거치면 프로세스가 아무 제약 없이 사용자의 데이터를 물리 메모리에 배치할 수 있다. 

<br>



### 가상 메모리의 메모리 분할 방식

가상 메모리 시스템에서는 운영체제를 제외한 나머지 메모리 영역을 일정한 크기로 나누어 일반 프로세스에 할당한다. 가상 메모리 시스템의 경우에도 가변 분할 방식과 고정 분할 방식이 있으며 각각 세그먼테이션, 페이징이라고 한다. 

가상 메모리 시스템에서는 두 기법의 단점을 보완한 세그먼테이션-페이징 혼용 기법을 주로 사용한다.

<br>



## 매핑 테이블의 필요성과 역할

메모리 관리자는 가상 주소와 물리 주소를 일대일 매핑 테이블로 관리한다. 페이징 기법에서 사용하는 매핑 테이블은 페이지 매핑 테이블 또는 페이지 테이블이라고 하고, 세그먼테이션 기법에서 사용하는 매핑 테이블은 세그먼테이션 매핑 테이블 또는 세그먼테이션 테이블이라고 부른다.