# 세그먼테이션 기법

가변 분할 방식을 이용한 가상 메모리 관리 기법으로 물리 메모리를 프로세스의 크기에 따라 가변적으로 나누어 사용한다.

<br>



## 세그먼테이션 기법의 구현

세그먼테이션 기법도 매핑 테이블을 사용하며 이를 세그먼테이션 테이블 또는 세그먼테이션 매핑 테이블이라고 한다.

세그먼테이션 테이블에는 세그먼트의 크기를 나타내는 limit와 물리 메모리상의 시작 주소를 나타내는 address가 있다. 세그먼테이션 기법의 경우 프로세스의 크기에 따라 메모리를 분할하기 때문에 매핑 테이블에 크기 정보를 포함한다. 

세그먼테이션 기법에서도 물리 메모리가 부족할 때 스왑 영역을 사용한다. 

- 장점 : 메모리를 프로세스 단위로 관리하기 때문에 페이지 테이블이 작고 단순하다.
- 단점 : 물리 메모리의 외부 단편화로 인해 물리 메모리 관리가 복잡하다.

<br>



## 세그먼테이션 기법의 주소 변환

세그먼테이션 기법에서는 가상 주소를 VA = <S, D>로 표현한다. 

- S : 세그먼트 번호
- D : 세그먼트 시작 지점에서 해당 주소까지의 거리

<br>



주소 변환 과정

1. 가상 주소를 구한다.

2. 세그먼테이션 테이블에서 세그먼트 0의 시작 주소를 알아낸 후 시작 주소에 거리를 더해 물리 주소 번지를 구한다. 

   이때 메모리 관리자는 거리가 세그먼트의 크기보다 큰지 점검한다. 만약 크다면 메모리를 벗어나는 것이기 때문에 메모리 오류를 출력하고 해당 프로세스를 강제 종료한다. 크지 않다면 물리 주소를 구한다.

3. 물리 주소 번지에 접근하여 원하는 데이터를 읽거나 쓴다.

<br>



사용자가 프로세스의 크기보다 더 큰 주소에 접근하려고 하면 트랩이 발생한다. 트랩은 사용자가 의도치 않게 일으키는 인터럽트를 말한다. 트랩과 반대로 사용자가 의도한 인터럽트는 시그널이라고 한다.