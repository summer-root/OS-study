# 교착 상태의 개요
## 교착 상태의 정의
2개 이상의 프로세스가 다른 프로세스의 작업이 끝나기만 기다리며 작업을 더 이상 진행하지 못하는 상태를 교착상태(dead lock)이라고 한다. <br>
교착상태는 아사 현상과 비슷해 보이지만 운영체제가 잘못된 정책을 사용하여 특정 프로세스의 작업이 지연되는 아사 현상과 달리 여러 프로세스가 작업을 진행하다 보니 자연적으로 일어나는 문제이다.<br>
따라서 운영체제는 감시를 하다가 교착상태가 발생하면 강압적으로 해결해야 한다.<br>

------------

## 교착상태의 발생
### 시스템 자원
교착상태는 다른 프로세스와 공유할 수 없는 자원을 사용할 때 발생한다.<br>
어떤 프로세스가 임계 구역으로 보호되는 프린터, 스캐너, CD레코더 등 동시에 사용할 수 없는 시스템 자원을 할당받은 후 양보하지 않는 경우를 예로 들 수 있다.<br>

### 공유 변수
한 변수를 할당받은 상태에서 다른 변수를 기다리면 교착 상태가 발생한다.<br>

### 응용 프로그램
여러 프로세스가 데이터베이스에 저장된 데이터를 사용할 때는 데이터의 일관성을 유지해야 한다.<br>
데이터베이스는 데이터의 일관성을 유지하기 위해 잠금을 사용하는데, 이때 교착상태가 발생할 수 있다.<br>

------------

## 지원 할당 그래프 resource allocation graph
어떤 자원을 사용 중이고 어떤 자원을 기다리고 있는지를 방향성이 있는 그래프 directional graph로 표현한 것으로, 어떤 프로세스에 자원이 할당되어 있는지 혹은 어떤 프로세스가 자원을 기다리고 있는지를 한눈에 파악할 수 있다. <br>
<br>
자원 할당 그래프에서는 프로세스는 원으로, 자원은 사각형으로 표현한다.<br>
자원을 사용하고 있는 경우(할당된 경우)에는 자원으로부터 프로세스로 향해 화살표로 표시하고, 반대로 프로세스가 자원을 기다리는 경우(대기하는 경우)는 프로세스로부터 자원으로 향하는 화살표로 표시한다.<br>

### 다중 지원 multiple resource
여러 프로세스가 하나의 자원을 동시에 사용하는 것을 말한다. 다중 자원은 수용할 수 있는 프로세스 수를 사각형 안에 작은 동그라미로 표현한다.<br>
![](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FbdmARg%2FbtrJrPIaUBD%2FKAhC0Bvf5Wg4FQqKJyQps1%2Fimg.png)<br>

### 식사하는 철학자 문제
![](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FbcT74f%2FbtrJwYwQp2o%2FI4mySsS5De1JKVp11SHJGK%2Fimg.png)<br>
철학자 4명이 둥그런 식탁에 둘러앉아 식사를 하는데, 왼쪽에 있는 포크를 잡은 뒤 오른쪽에 있는 포크를 잡아야만 식사가 가능하다는 조건이 있다.<br>
철학자들은 음식을 먹기 위해 왼쪽 포크를 잡은 후 오른쪽 포크를 잡으려고 하지만 옆에는 이미 왼손에 포크를 들고 있는 다른 철학자가 앉아있기 때문에 식사를 할 수 없다.<br>
<br>
식사하는 철학자 문제는 교착상태가 어떻게 발생하는지를 보여주며 다음과 같은 경우에 교착상태가 발생한다.<br>

1. 자원을 공유하지 못할 경우 교착상태가 발생한다.
2. 자원을 빼앗을 수 없으면 자원을 놓을 때까지 기다려야 하므로 교착상태가 발생한다.
3. 자원 하나를 잡은 상태에서 다른 자원을 기다리면 교착상태가 발생한다.
4. 자원을 요구하는 방향이 원을 이루면 양보를 하지 않기 때문에 교착상태가 발생한다.


